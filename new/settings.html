<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paramètres - Zyra</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" href="assets/logo.png">
</head>
<body>
    <header class="top-header" id="topHeader">
        <div class="header-container">
            <div class="brand-section">
                <a href="home.html" class="back-btn"><i class="fas fa-arrow-left"></i></a>
                <span class="brand-name">Paramètres</span>
            </div>
            <div class="desktop-nav-icons">
                <button class="nav-icon" title="Se déconnecter" id="logoutBtn"><i class="fas fa-sign-out-alt"></i></button>
            </div>
        </div>
    </header>

    <main class="main-content">
        <div class="container">
            <div class="settings-layout">
                <nav class="settings-nav" id="settingsNav">
                    <a href="#general" class="nav-link active"><i class="fas fa-user-cog"></i> Général</a>
                    <a href="#account" class="nav-link"><i class="fas fa-key"></i> Compte</a>
                    <a href="#privacy" class="nav-link"><i class="fas fa-shield-alt"></i> Confidentialité</a>
                    <a href="#danger-zone" class="nav-link danger-link"><i class="fas fa-exclamation-triangle"></i> Zone de Danger</a>
                </nav>

                <div class="settings-content-wrapper">
                    <div id="settingsMessage" class="message hidden"></div>

                    <div class="settings-content" id="settingsContent">
                        
                        <section class="settings-section active" id="general">
                            <h2><i class="fas fa-user-cog"></i> Général</h2>
                            <form id="profileUpdateForm">
                                <div class="form-group avatar-upload-group">
                                    <img src="assets/default-avatar.png" alt="Avatar actuel" id="profilePicPreview" class="profile-avatar-large">
                                    <label for="profilePicInput" class="btn-secondary">
                                        <i class="fas fa-camera"></i> Changer la photo
                                    </label>
                                    <input type="file" id="profilePicInput" accept="image/*" class="hidden">
                                </div>

                                <div class="form-group">
                                    <label for="displayName"><i class="fas fa-user"></i> Nom d'utilisateur</label>
                                    <input type="text" id="displayName" placeholder="Votre nom d'affichage" required>
                                </div>
                                <div class="form-group">
                                    <label for="bio"><i class="fas fa-info-circle"></i> Biographie</label>
                                    <textarea id="bio" placeholder="Parlez de vous en quelques mots..." rows="3"></textarea>
                                </div>
                                
                                <button type="submit" class="btn-primary" id="saveProfileBtn">
                                    <i class="fas fa-save"></i> Enregistrer les modifications
                                </button>
                            </form>
                        </section>

                        <section class="settings-section hidden" id="account">
                            <h2><i class="fas fa-key"></i> Compte & Sécurité</h2>
                            
                            <form id="emailUpdateForm" class="settings-form">
                                <h3>Changer d'Email</h3>
                                <div class="form-group">
                                    <label for="newEmail"><i class="fas fa-envelope"></i> Nouvel Email</label>
                                    <input type="email" id="newEmail" placeholder="nouvel.email@example.com" required>
                                </div>
                                <div class="form-group">
                                    <label for="currentPasswordEmail"><i class="fas fa-lock"></i> Mot de passe actuel</label>
                                    <input type="password" id="currentPasswordEmail" required>
                                </div>
                                <button type="submit" class="btn-primary">
                                    <i class="fas fa-save"></i> Changer d'email
                                </button>
                            </form>
                            
                            <form id="passwordUpdateForm" class="settings-form">
                                <h3>Changer de Mot de passe</h3>
                                <div class="form-group">
                                    <label for="currentPassword"><i class="fas fa-lock"></i> Mot de passe actuel</label>
                                    <input type="password" id="currentPassword" required>
                                </div>
                                <div class="form-group">
                                    <label for="newPassword"><i class="fas fa-lock"></i> Nouveau mot de passe</label>
                                    <input type="password" id="newPassword" required minlength="6">
                                </div>
                                <div class="form-group">
                                    <label for="confirmNewPassword"><i class="fas fa-lock"></i> Confirmer nouveau mot de passe</label>
                                    <input type="password" id="confirmNewPassword" required minlength="6">
                                </div>
                                <button type="submit" class="btn-primary">
                                    <i class="fas fa-save"></i> Changer le mot de passe
                                </button>
                            </form>
                        </section>

                        <section class="settings-section hidden" id="privacy">
                            <h2><i class="fas fa-shield-alt"></i> Confidentialité</h2>
                            <form id="privacySettingsForm">
                                <div class="form-group switch-group">
                                    <label>Profil Public</label>
                                    <input type="checkbox" id="publicProfileToggle" class="switch-input">
                                    <label for="publicProfileToggle" class="switch-label"></label>
                                </div>
                                <p class="help-text">Si désactivé, seules vos amis pourront voir vos publications.</p>
                                
                                <div class="form-group switch-group">
                                    <label>Recevoir des demandes d'amis</label>
                                    <input type="checkbox" id="allowFriendRequests" class="switch-input" checked>
                                    <label for="allowFriendRequests" class="switch-label"></label>
                                </div>
                                <p class="help-text">Contrôlez qui peut vous envoyer des demandes d'amis.</p>

                                <button type="submit" class="btn-primary" id="savePrivacySettings">
                                    <i class="fas fa-save"></i> Enregistrer les paramètres
                                </button>
                            </form>
                        </section>

                        <section class="settings-section danger-zone hidden" id="danger-zone">
                            <h2><i class="fas fa-exclamation-triangle"></i> Zone de Danger</h2>
                            <div class="danger-card">
                                <h3>Supprimer le Compte</h3>
                                <p>Cette action est irréversible et supprimera toutes vos données (publications, amis, messages) de la plateforme.</p>
                                <button class="btn-danger" id="deleteAccountBtn">
                                    <i class="fas fa-trash-alt"></i> Supprimer mon compte
                                </button>
                            </div>
                        </section>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <nav class="mobile-bottom-nav" id="mobileBottomNav">
        <a href="home.html" class="nav-link" title="Accueil">
            <i class="fas fa-home"></i>
            <span>Accueil</span>
        </a>
        <a href="friends.html" class="nav-link" title="Amis">
            <i class="fas fa-user-friends"></i>
            <span>Amis</span>
        </a>
        <a href="upload.html" class="nav-link is-center" title="Publier">
            <i class="fas fa-plus-circle"></i>
        </a>
        <a href="messages.html" class="nav-link" title="Messages">
            <i class="fas fa-envelope"></i>
            <span>Messages</span>
        </a>
        <a href="profile.html" class="nav-link" title="Profil">
            <i class="fas fa-user"></i>
            <span>Profil</span>
        </a>
    </nav>

    <script type="module" src="js/firebase.js"></script>
    <script type="module" src="js/settings.js"></script>
</body>
</html>