<!DOCTYPE html>
<html lang="rw">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MovieShow - Filimu</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/png" href="logo.png">
</head>
<body>
    <!-- Barre de navigation supérieure -->
    <nav class="top-nav">
        <div class="nav-container">
            <a href="home-free.html" class="back-btn">
                <i class="fas fa-arrow-left"></i>
            </a>
            <div class="logo-center">
                <img src="logo.png" alt="MovieShow Logo" class="nav-logo">
                <span class="page-title">Filimu</span>
            </div>
            <div class="nav-actions">
                <button class="filter-toggle" id="filter-toggle">
                    <i class="fas fa-filter"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Panneau de filtres -->
    <div id="filter-panel" class="filter-panel">
        <div class="filter-header">
            <h3><i class="fas fa-sliders-h"></i> Icyicuruzwa</h3>
            <button class="close-filter">&times;</button>
        </div>
        
        <div class="filter-body">
            <!-- Filtre par année -->
            <div class="filter-group">
                <h4><i class="fas fa-calendar-alt"></i> Umwaka</h4>
                <div class="year-filter">
                    <select id="year-select" class="filter-select">
                        <option value="all">Byose</option>
                        <option value="2024">2024</option>
                        <option value="2023">2023</option>
                        <option value="2022">2022</option>
                        <option value="2021">2021</option>
                        <option value="2020">2020</option>
                    </select>
                </div>
            </div>
            
            <!-- Filtre par catégorie -->
            <div class="filter-group">
                <h4><i class="fas fa-tags"></i> Ibyiciro</h4>
                <div class="category-filters">
                    <label class="filter-checkbox">
                        <input type="checkbox" value="action" checked>
                        <span class="checkmark"></span>
                        Action
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" value="drama" checked>
                        <span class="checkmark"></span>
                        Drama
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" value="comedy" checked>
                        <span class="checkmark"></span>
                        Komedi
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" value="horror" checked>
                        <span class="checkmark"></span>
                        Ibitangaza
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" value="romance" checked>
                        <span class="checkmark"></span>
                        Urukundo
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" value="adventure" checked>
                        <span class="checkmark"></span>
                        Ibigeragezo
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" value="sci-fi" checked>
                        <span class="checkmark"></span>
                        Siyeñsi
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" value="animation" checked>
                        <span class="checkmark"></span>
                        Filimu y'abana
                    </label>
                </div>
            </div>
            
            <!-- Filtre par langue -->
            <div class="filter-group">
                <h4><i class="fas fa-language"></i> Ururimi</h4>
                <div class="language-filters">
                    <label class="filter-checkbox">
                        <input type="checkbox" value="french" checked>
                        <span class="checkmark"></span>
                        Igifaransa
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" value="english" checked>
                        <span class="checkmark"></span>
                        Icyongereza
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" value="kinyarwanda" checked>
                        <span class="checkmark"></span>
                        Kinyarwanda
                    </label>
                </div>
            </div>
        </div>
        
        <div class="filter-footer">
            <button id="apply-filters" class="filter-btn primary">
                <i class="fas fa-check"></i> Kongeramo
            </button>
            <button id="reset-filters" class="filter-btn secondary">
                <i class="fas fa-redo"></i> Subira utangire
            </button>
        </div>
    </div>

    <!-- Contenu principal -->
    <main class="main-content">
        <!-- Statistiques -->
        <div class="stats-bar">
            <div class="stat-item">
                <i class="fas fa-film"></i>
                <span class="stat-count" id="movie-count">0</span>
                <span class="stat-label">Filimu</span>
            </div>
            <div class="stat-item">
                <i class="fas fa-clock"></i>
                <span class="stat-count" id="total-hours">0</span>
                <span class="stat-label">Isaha</span>
            </div>
            <div class="stat-item">
                <i class="fas fa-calendar-star"></i>
                <span class="stat-count" id="new-this-year">0</span>
                <span class="stat-label">Byashya 2024</span>
            </div>
        </div>

        <!-- Résultats de filtrage -->
        <div class="filter-results">
            <div class="active-filters" id="active-filters">
                <!-- Filtres actifs apparaîtront ici -->
            </div>
            <div class="sort-options">
                <select id="sort-movies" class="sort-select">
                    <option value="newest">Byashyizeho vuba</option>
                    <option value="oldest">Byakozwe kera</option>
                    <option value="title">Zina</option>
                    <option value="popular">Bikunzwe</option>
                </select>
            </div>
        </div>

        <!-- Grille de films -->
        <div class="movies-grid" id="movies-grid">
            <!-- Films seront chargés dynamiquement ici -->
            <div class="loading-movies">
                <div class="movie-card loading"></div>
                <div class="movie-card loading"></div>
                <div class="movie-card loading"></div>
                <div class="movie-card loading"></div>
                <div class="movie-card loading"></div>
                <div class="movie-card loading"></div>
            </div>
        </div>
        
        <!-- Message si aucun résultat -->
        <div id="no-results" class="no-results hidden">
            <i class="fas fa-film-slash"></i>
            <h3>Nta film ibonetse</h3>
            <p>Hindura ibicuruzwa cyangwa subira utangire</p>
            <button id="clear-all-filters" class="action-btn">
                <i class="fas fa-times"></i> Subira utangire ibyose
            </button>
        </div>
        
        <!-- Charger plus -->
        <div class="load-more-container">
            <button id="load-more-movies" class="load-more-btn">
                <i class="fas fa-plus-circle"></i> Ongera uzane film nshya
            </button>
        </div>
    </main>

    <!-- Barre de navigation inférieure -->
    <nav class="bottom-nav">
        <div class="bottom-nav-container">
            <a href="home-free.html" class="nav-item">
                <i class="fas fa-home"></i>
                <span>Intangiriro</span>
            </a>
            
            <a href="movies.html" class="nav-item active">
                <i class="fas fa-film"></i>
                <span>Filimu</span>
            </a>
            
            <a href="tvshows.html" class="nav-item">
                <i class="fas fa-tv"></i>
                <span>Imiseke</span>
            </a>
            
            <div class="nav-item menu-item" id="hamburger-menu">
                <i class="fas fa-bars"></i>
                <span>Menu</span>
                <div class="dropdown-menu">
                    <div class="dropdown-section">
                        <h3><i class="fas fa-th-large"></i> Ibyiciro bya film</h3>
                        <a href="#" class="dropdown-link" data-category="action">Action</a>
                        <a href="#" class="dropdown-link" data-category="comedy">Komedi</a>
                        <a href="#" class="dropdown-link" data-category="drama">Drama</a>
                        <a href="#" class="dropdown-link" data-category="horror">Ibitangaza</a>
                        <a href="#" class="dropdown-link" data-category="new">Byashyizeho vuba</a>
                    </div>
                    
                    <div class="dropdown-section">
                        <h3><i class="fas fa-cog"></i> Igenamiterere</h3>
                        <a href="#" class="dropdown-link" id="privacy-link">
                            <i class="fas fa-user-shield"></i> Amabanga
                        </a>
                        <a href="#" class="dropdown-link" id="help-link">
                            <i class="fas fa-question-circle"></i> Ubufasha
                        </a>
                        <div class="dropdown-link language-selector">
                            <i class="fas fa-language"></i> Ururimi
                            <select id="language-select" class="lang-select">
                                <option value="rw">Kinyarwanda</option>
                                <option value="en">English</option>
                            </select>
                        </div>
                        <a href="#" class="dropdown-link" id="upgrade-link">
                            <i class="fas fa-crown"></i> Hindura ujye mu Kwishyura
                        </a>
                    </div>
                    
                    <div class="dropdown-footer">
                        <div class="plan-info">
                            <span class="plan-badge free">Ubusa</span>
                            <span class="plan-expiry">Ushobora kureka amatangazo</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Avertissement pour le mode gratuit -->
    <div class="free-mode-banner">
        <div class="banner-content">
            <i class="fas fa-ad"></i>
            <span>Uko uri mu buryo bwa <strong>Ubusa</strong>. Amatangazo azaboneka.</span>
            <button id="upgrade-banner-btn" class="upgrade-btn">
                <i class="fas fa-crown"></i> Hindura
            </button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="allconfig.js"></script>
    <script>
        // Script spécifique à la page des films
        document.addEventListener('DOMContentLoaded', function() {
            // Vérifier si l'utilisateur a choisi un plan
            const userPlan = localStorage.getItem('movieshow_plan');
            if (!userPlan) {
                window.location.href = 'index.html';
                return;
            }
            
            // Charger la langue sauvegardée
            const savedLang = localStorage.getItem('movieshow_lang') || 'rw';
            document.getElementById('language-select').value = savedLang;
            updateLanguage(savedLang);
            
            // Initialiser les événements
            initEvents();
            
            // Charger les films
            loadMovies();
            
            // Mettre à jour les statistiques
            updateStats();
        });

        function initEvents() {
            // Gestion du panneau de filtres
            document.getElementById('filter-toggle').addEventListener('click', function() {
                document.getElementById('filter-panel').classList.add('show');
            });

            document.querySelector('.close-filter').addEventListener('click', function() {
                document.getElementById('filter-panel').classList.remove('show');
            });

            // Appliquer les filtres
            document.getElementById('apply-filters').addEventListener('click', function() {
                applyFilters();
                document.getElementById('filter-panel').classList.remove('show');
            });

            // Réinitialiser les filtres
            document.getElementById('reset-filters').addEventListener('click', function() {
                resetFilters();
            });

            // Gestion du menu hamburger (similaire à home-free.html)
            document.getElementById('hamburger-menu').addEventListener('click', function(e) {
                e.stopPropagation();
                const dropdown = this.querySelector('.dropdown-menu');
                dropdown.classList.toggle('show');
            });

            document.addEventListener('click', function() {
                document.querySelectorAll('.dropdown-menu.show').forEach(menu => {
                    menu.classList.remove('show');
                });
            });

            // Changement de langue
            document.getElementById('language-select').addEventListener('change', function() {
                const lang = this.value;
                localStorage.setItem('movieshow_lang', lang);
                updateLanguage(lang);
            });

            // Trier les films
            document.getElementById('sort-movies').addEventListener('change', function() {
                sortMovies(this.value);
            });

            // Charger plus de films
            document.getElementById('load-more-movies').addEventListener('click', loadMoreMovies);

            // Nettoyer tous les filtres
            document.getElementById('clear-all-filters').addEventListener('click', resetFilters);

            // Mise à niveau vers premium
            document.getElementById('upgrade-banner-btn').addEventListener('click', function() {
                localStorage.setItem('movieshow_plan', 'premium');
                alert('Ujyanye no kwishyura uzakorwa vuba. Kuva none, ujye mu buryo bwa bidasabwe.');
                window.location.reload();
            });

            document.getElementById('upgrade-link').addEventListener('click', function(e) {
                e.preventDefault();
                localStorage.setItem('movieshow_plan', 'premium');
                alert('Ujyanye no kwishyura uzakorwa vuba. Kuva none, ujye mu buryo bwa bidasabwe.');
                window.location.reload();
            });

            // Ouvrir les ads au clic sur un film
            document.addEventListener('click', function(e) {
                if (e.target.closest('.movie-card')) {
                    const userPlan = localStorage.getItem('movieshow_plan');
                    if (userPlan === 'free') {
                        window.open('https://www.effectivegatecpm.com/wu0xndpxcg?key=962747162b526b8e35632b7e46f1e881', '_blank');
                        setTimeout(() => {
                            const movieId = e.target.closest('.movie-card').dataset.id;
                            window.location.href = 'watch.html?id=' + movieId + '&type=movie';
                        }, 500);
                    } else {
                        const movieId = e.target.closest('.movie-card').dataset.id;
                        window.location.href = 'watch.html?id=' + movieId + '&type=movie';
                    }
                }
            });

            // Filtrer par catégorie depuis le menu
            document.querySelectorAll('.dropdown-link[data-category]').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const category = this.dataset.category;
                    if (category === 'new') {
                        document.getElementById('year-select').value = '2024';
                        applyFilters();
                    } else {
                        // Activer seulement cette catégorie
                        document.querySelectorAll('.category-filters input').forEach(checkbox => {
                            checkbox.checked = (checkbox.value === category.toLowerCase());
                        });
                        applyFilters();
                    }
                    document.querySelector('.dropdown-menu').classList.remove('show');
                });
            });
        }

        function loadMovies() {
            const grid = document.getElementById('movies-grid');
            grid.innerHTML = '';
            
            // Générer 24 films de test
            const movies = [];
            const titles = [
                "Intambara ya Kigali", "Amahoro mu Rwanda", "Umukobwa w'umuhanga",
                "Ikiranga abanyarwanda", "Ubucuti bw'ingoma", "Impaka z'ubutunzi",
                "Umwana w'umuhinzi", "Imikino y'urugamba", "Igihugu cy'uburere",
                "Ubukwe bw'umutunzi", "Amateka y'u Rwanda", "Iminsi y'urukundo"
            ];
            
            const years = ['2024', '2023', '2022', '2021'];
            const categories = ['action', 'drama', 'comedy', 'horror', 'romance', 'adventure'];
            const languages = ['FRENCH', 'ENGLISH', 'KINYARWANDA'];
            
            for (let i = 1; i <= 24; i++) {
                const title = titles[Math.floor(Math.random() * titles.length)];
                const year = years[Math.floor(Math.random() * years.length)];
                const category = categories[Math.floor(Math.random() * categories.length)];
                const language = languages[Math.floor(Math.random() * languages.length)];
                const duration = Math.floor(Math.random() * 180) + 60; // 60-240 minutes
                
                movies.push({
                    id: i,
                    title: `${title} ${i}`,
                    year: year,
                    category: category,
                    language: language,
                    duration: duration,
                    badge: language,
                    featured: i <= 5
                });
            }
            
            // Afficher les films
            displayMovies(movies);
            updateActiveFilters();
        }

        function displayMovies(movies) {
            const grid = document.getElementById('movies-grid');
            grid.innerHTML = '';
            
            if (movies.length === 0) {
                document.getElementById('no-results').classList.remove('hidden');
                return;
            }
            
            document.getElementById('no-results').classList.add('hidden');
            
            movies.forEach(movie => {
                const card = document.createElement('div');
                card.className = 'movie-card';
                card.dataset.id = movie.id;
                card.dataset.year = movie.year;
                card.dataset.category = movie.category;
                card.dataset.language = movie.language.toLowerCase();
                
                // Couleur du badge selon la langue
                let badgeClass = '';
                if (movie.badge === 'FRENCH') badgeClass = 'french';
                else if (movie.badge === 'ENGLISH') badgeClass = 'english';
                else badgeClass = 'kinyarwanda';
                
                // Icône de catégorie
                let categoryIcon = 'fa-film';
                if (movie.category === 'action') categoryIcon = 'fa-fist-raised';
                else if (movie.category === 'comedy') categoryIcon = 'fa-laugh';
                else if (movie.category === 'drama') categoryIcon = 'fa-theater-masks';
                else if (movie.category === 'horror') categoryIcon = 'fa-ghost';
                else if (movie.category === 'romance') categoryIcon = 'fa-heart';
                else if (movie.category === 'adventure') categoryIcon = 'fa-mountain';
                
                card.innerHTML = `
                    <div class="movie-image">
                        <div class="movie-badge ${badgeClass}">${movie.badge}</div>
                        <div class="movie-overlay">
                            <div class="movie-duration">
                                <i class="fas fa-clock"></i> ${Math.floor(movie.duration/60)}h${movie.duration%60}m
                            </div>
                            <div class="play-button">
                                <i class="fas fa-play"></i>
                            </div>
                            <div class="movie-year">${movie.year}</div>
                        </div>
                    </div>
                    <div class="movie-info">
                        <h3 class="movie-title">${movie.title}</h3>
                        <div class="movie-meta">
                            <span class="movie-category">
                                <i class="fas ${categoryIcon}"></i>
                                ${movie.category.charAt(0).toUpperCase() + movie.category.slice(1)}
                            </span>
                            <span class="movie-rating">
                                <i class="fas fa-star"></i>
                                ${(Math.random() * 2 + 3).toFixed(1)}
                            </span>
                        </div>
                    </div>
                `;
                
                grid.appendChild(card);
            });
            
            // Mettre à jour le compteur
            document.getElementById('movie-count').textContent = movies.length;
        }

        function applyFilters() {
            const selectedYear = document.getElementById('year-select').value;
            const selectedCategories = Array.from(document.querySelectorAll('.category-filters input:checked'))
                .map(cb => cb.value);
            const selectedLanguages = Array.from(document.querySelectorAll('.language-filters input:checked'))
                .map(cb => cb.value);
            
            // Filtrer les films
            const allMovies = Array.from(document.querySelectorAll('.movie-card'));
            let visibleCount = 0;
            
            allMovies.forEach(card => {
                const year = card.dataset.year;
                const category = card.dataset.category;
                const language = card.dataset.language;
                
                const yearMatch = selectedYear === 'all' || year === selectedYear;
                const categoryMatch = selectedCategories.length === 0 || 
                                    selectedCategories.includes(category);
                const languageMatch = selectedLanguages.length === 0 || 
                                    selectedLanguages.includes(language);
                
                if (yearMatch && categoryMatch && languageMatch) {
                    card.style.display = 'block';
                    visibleCount++;
                } else {
                    card.style.display = 'none';
                }
            });
            
            // Afficher/masquer le message "aucun résultat"
            if (visibleCount === 0) {
                document.getElementById('no-results').classList.remove('hidden');
            } else {
                document.getElementById('no-results').classList.add('hidden');
            }
            
            // Mettre à jour le compteur
            document.getElementById('movie-count').textContent = visibleCount;
            
            // Mettre à jour les filtres actifs
            updateActiveFilters(selectedYear, selectedCategories, selectedLanguages);
        }

        function resetFilters() {
            // Réinitialiser les sélections
            document.getElementById('year-select').value = 'all';
            document.querySelectorAll('.category-filters input').forEach(cb => cb.checked = true);
            document.querySelectorAll('.language-filters input').forEach(cb => cb.checked = true);
            
            // Réappliquer les filtres
            applyFilters();
            
            // Masquer le panneau de filtres s'il est ouvert
            document.getElementById('filter-panel').classList.remove('show');
        }

        function updateActiveFilters(year, categories, languages) {
            const container = document.getElementById('active-filters');
            container.innerHTML = '';
            
            let hasFilters = false;
            
            if (year && year !== 'all') {
                hasFilters = true;
                const filterTag = document.createElement('span');
                filterTag.className = 'filter-tag';
                filterTag.innerHTML = `
                    <span>Umwaka: ${year}</span>
                    <button class="remove-filter" data-type="year">&times;</button>
                `;
                container.appendChild(filterTag);
            }
            
            if (categories && categories.length < 7) {
                hasFilters = true;
                const filterTag = document.createElement('span');
                filterTag.className = 'filter-tag';
                filterTag.innerHTML = `
                    <span>Ibyiciro: ${categories.length}</span>
                    <button class="remove-filter" data-type="categories">&times;</button>
                `;
                container.appendChild(filterTag);
            }
            
            if (languages && languages.length < 3) {
                hasFilters = true;
                const filterTag = document.createElement('span');
                filterTag.className = 'filter-tag';
                filterTag.innerHTML = `
                    <span>Ururimi: ${languages.length}</span>
                    <button class="remove-filter" data-type="languages">&times;</button>
                `;
                container.appendChild(filterTag);
            }
            
            // Ajouter des événements pour supprimer les filtres
            container.querySelectorAll('.remove-filter').forEach(btn => {
                btn.addEventListener('click', function() {
                    const type = this.dataset.type;
                    if (type === 'year') {
                        document.getElementById('year-select').value = 'all';
                    } else if (type === 'categories') {
                        document.querySelectorAll('.category-filters input').forEach(cb => cb.checked = true);
                    } else if (type === 'languages') {
                        document.querySelectorAll('.language-filters input').forEach(cb => cb.checked = true);
                    }
                    applyFilters();
                });
            });
            
            // Afficher/masquer le conteneur
            if (hasFilters) {
                container.classList.remove('hidden');
            } else {
                container.classList.add('hidden');
            }
        }

        function sortMovies(criteria) {
            const grid = document.getElementById('movies-grid');
            const movies = Array.from(grid.children);
            
            movies.sort((a, b) => {
                const aId = parseInt(a.dataset.id);
                const bId = parseInt(b.dataset.id);
                const aYear = parseInt(a.dataset.year);
                const bYear = parseInt(b.dataset.year);
                const aTitle = a.querySelector('.movie-title').textContent;
                const bTitle = b.querySelector('.movie-title').textContent;
                
                switch(criteria) {
                    case 'newest':
                        return bYear - aYear || bId - aId;
                    case 'oldest':
                        return aYear - bYear || aId - bId;
                    case 'title':
                        return aTitle.localeCompare(bTitle);
                    case 'popular':
                        // Simuler la popularité par ID (plus élevé = plus récent)
                        return bId - aId;
                    default:
                        return bId - aId;
                }
            });
            
            // Réorganiser le DOM
            movies.forEach(movie => grid.appendChild(movie));
        }

        function loadMoreMovies() {
            const userPlan = localStorage.getItem('movieshow_plan');
            if (userPlan === 'free') {
                window.open('https://www.effectivegatecpm.com/wu0xndpxcg?key=962747162b526b8e35632b7e46f1e881', '_blank');
            }
            
            const grid = document.getElementById('movies-grid');
            const currentCount = grid.children.length;
            
            // Ajouter 12 films supplémentaires
            for (let i = currentCount + 1; i <= currentCount + 12; i++) {
                const categories = ['action', 'drama', 'comedy', 'horror'];
                const languages = ['FRENCH', 'ENGLISH'];
                const category = categories[Math.floor(Math.random() * categories.length)];
                const language = languages[Math.floor(Math.random() * languages.length)];
                
                const card = document.createElement('div');
                card.className = 'movie-card';
                card.dataset.id = i;
                card.dataset.year = Math.random() > 0.5 ? '2024' : '2023';
                card.dataset.category = category;
                card.dataset.language = language.toLowerCase();
                
                let badgeClass = language === 'FRENCH' ? 'french' : 'english';
                let categoryIcon = 'fa-film';
                if (category === 'action') categoryIcon = 'fa-fist-raised';
                else if (category === 'comedy') categoryIcon = 'fa-laugh';
                else if (category === 'drama') categoryIcon = 'fa-theater-masks';
                else if (category === 'horror') categoryIcon = 'fa-ghost';
                
                card.innerHTML = `
                    <div class="movie-image">
                        <div class="movie-badge ${badgeClass}">${language}</div>
                        <div class="movie-overlay">
                            <div class="movie-duration">
                                <i class="fas fa-clock"></i> ${Math.floor(Math.random() * 3) + 1}h${Math.floor(Math.random() * 60)}m
                            </div>
                            <div class="play-button">
                                <i class="fas fa-play"></i>
                            </div>
                            <div class="movie-year">${card.dataset.year}</div>
                        </div>
                    </div>
                    <div class="movie-info">
                        <h3 class="movie-title">Film nshya ${i}</h3>
                        <div class="movie-meta">
                            <span class="movie-category">
                                <i class="fas ${categoryIcon}"></i>
                                ${category.charAt(0).toUpperCase() + category.slice(1)}
                            </span>
                            <span class="movie-rating">
                                <i class="fas fa-star"></i>
                                ${(Math.random() * 2 + 3).toFixed(1)}
                            </span>
                        </div>
                    </div>
                `;
                
                grid.appendChild(card);
            }
            
            // Mettre à jour le compteur
            const visibleMovies = Array.from(grid.children).filter(card => 
                card.style.display !== 'none'
            ).length;
            document.getElementById('movie-count').textContent = visibleMovies;
        }

        function updateStats() {
            // Simuler des statistiques
            const movieCount = document.querySelectorAll('.movie-card').length;
            const totalHours = Math.floor(movieCount * 2.5); // Moyenne 2.5h par film
            const newThisYear = Math.floor(movieCount * 0.3); // 30% des films de 2024
            
            document.getElementById('movie-count').textContent = movieCount;
            document.getElementById('total-hours').textContent = totalHours;
            document.getElementById('new-this-year').textContent = newThisYear;
        }

        function updateLanguage(lang) {
            const translations = {
                'rw': {
                    pageTitle: "Filimu",
                    filterToggle: "Icyicuruzwa",
                    filterTitle: "Icyicuruzwa",
                    yearFilter: "Umwaka",
                    allYears: "Byose",
                    categoryFilter: "Ibyiciro",
                    action: "Action",
                    drama: "Drama",
                    comedy: "Komedi",
                    horror: "Ibitangaza",
                    romance: "Urukundo",
                    adventure: "Ibigeragezo",
                    scifi: "Siyeñsi",
                    animation: "Filimu y'abana",
                    languageFilter: "Ururimi",
                    french: "Igifaransa",
                    english: "Icyongereza",
                    kinyarwanda: "Kinyarwanda",
                    applyFilters: "Kongeramo",
                    resetFilters: "Subira utangire",
                    movies: "Filimu",
                    hours: "Isaha",
                    new2024: "Byashya 2024",
                    newest: "Byashyizeho vuba",
                    oldest: "Byakozwe kera",
                    byTitle: "Zina",
                    popular: "Bikunzwe",
                    loadMore: "Ongera uzane film nshya",
                    noResultsTitle: "Nta film ibonetse",
                    noResultsText: "Hindura ibicuruzwa cyangwa subira utangire",
                    clearFilters: "Subira utangire ibyose",
                    home: "Intangiriro",
                    moviesNav: "Filimu",
                    showsNav: "Imiseke",
                    menu: "Menu",
                    movieCategories: "Ibyiciro bya film",
                    new: "Byashyizeho vuba",
                    settings: "Igenamiterere",
                    privacy: "Amabanga",
                    help: "Ubufasha",
                    language: "Ururimi",
                    upgrade: "Hindura ujye mu Kwishyura",
                    planFree: "Ubusa",
                    planExpiry: "Ushobora kureka amatangazo",
                    bannerText: "Uko uri mu buryo bwa <strong>Ubusa</strong>. Amatangazo azaboneka.",
                    upgradeBtn: "Hindura"
                },
                'en': {
                    pageTitle: "Movies",
                    filterToggle: "Filters",
                    filterTitle: "Filters",
                    yearFilter: "Year",
                    allYears: "All",
                    categoryFilter: "Categories",
                    action: "Action",
                    drama: "Drama",
                    comedy: "Comedy",
                    horror: "Horror",
                    romance: "Romance",
                    adventure: "Adventure",
                    scifi: "Sci-Fi",
                    animation: "Animation",
                    languageFilter: "Language",
                    french: "French",
                    english: "English",
                    kinyarwanda: "Kinyarwanda",
                    applyFilters: "Apply",
                    resetFilters: "Reset",
                    movies: "Movies",
                    hours: "Hours",
                    new2024: "New 2024",
                    newest: "Newest",
                    oldest: "Oldest",
                    byTitle: "Title",
                    popular: "Popular",
                    loadMore: "Load more movies",
                    noResultsTitle: "No movies found",
                    noResultsText: "Adjust filters or reset",
                    clearFilters: "Clear all filters",
                    home: "Home",
                    moviesNav: "Movies",
                    showsNav: "TV Shows",
                    menu: "Menu",
                    movieCategories: "Movie Categories",
                    new: "New Releases",
                    settings: "Settings",
                    privacy: "Privacy",
                    help: "Help",
                    language: "Language",
                    upgrade: "Upgrade to Premium",
                    planFree: "Free",
                    planExpiry: "You can remove ads",
                    bannerText: "You are in <strong>Free</strong> mode. Ads will appear.",
                    upgradeBtn: "Upgrade"
                }
            };
            
            const t = translations[lang];
            
            // Mettre à jour les textes
            document.querySelector('.page-title').textContent = t.pageTitle;
            document.querySelector('.filter-header h3').innerHTML = `<i class="fas fa-sliders-h"></i> ${t.filterTitle}`;
            document.querySelectorAll('.filter-group h4')[0].innerHTML = `<i class="fas fa-calendar-alt"></i> ${t.yearFilter}`;
            document.querySelector('#year-select option[value="all"]').textContent = t.allYears;
            
            document.querySelectorAll('.filter-group h4')[1].innerHTML = `<i class="fas fa-tags"></i> ${t.categoryFilter}`;
            const categoryLabels = document.querySelectorAll('.category-filters label');
            categoryLabels[0].childNodes[2].textContent = ' ' + t.action;
            categoryLabels[1].childNodes[2].textContent = ' ' + t.drama;
            categoryLabels[2].childNodes[2].textContent = ' ' + t.comedy;
            categoryLabels[3].childNodes[2].textContent = ' ' + t.horror;
            categoryLabels[4].childNodes[2].textContent = ' ' + t.romance;
            categoryLabels[5].childNodes[2].textContent = ' ' + t.adventure;
            categoryLabels[6].childNodes[2].textContent = ' ' + t.scifi;
            categoryLabels[7].childNodes[2].textContent = ' ' + t.animation;
            
            document.querySelectorAll('.filter-group h4')[2].innerHTML = `<i class="fas fa-language"></i> ${t.languageFilter}`;
            const languageLabels = document.querySelectorAll('.language-filters label');
            languageLabels[0].childNodes[2].textContent = ' ' + t.french;
            languageLabels[1].childNodes[2].textContent = ' ' + t.english;
            languageLabels[2].childNodes[2].textContent = ' ' + t.kinyarwanda;
            
            document.querySelector('#apply-filters').innerHTML = `<i class="fas fa-check"></i> ${t.applyFilters}`;
            document.querySelector('#reset-filters').innerHTML = `<i class="fas fa-redo"></i> ${t.resetFilters}`;
            
            document.querySelectorAll('.stat-label')[0].textContent = t.movies;
            document.querySelectorAll('.stat-label')[1].textContent = t.hours;
            document.querySelectorAll('.stat-label')[2].textContent = t.new2024;
            
            document.querySelectorAll('#sort-movies option')[0].textContent = t.newest;
            document.querySelectorAll('#sort-movies option')[1].textContent = t.oldest;
            document.querySelectorAll('#sort-movies option')[2].textContent = t.byTitle;
            document.querySelectorAll('#sort-movies option')[3].textContent = t.popular;
            
            document.querySelector('#load-more-movies').innerHTML = `<i class="fas fa-plus-circle"></i> ${t.loadMore}`;
            
            document.querySelector('#no-results h3').textContent = t.noResultsTitle;
            document.querySelector('#no-results p').textContent = t.noResultsText;
            document.querySelector('#clear-all-filters').innerHTML = `<i class="fas fa-times"></i> ${t.clearFilters}`;
            
            document.querySelector('.bottom-nav a[href="home-free.html"] span').textContent = t.home;
            document.querySelector('.bottom-nav a[href="movies.html"] span').textContent = t.moviesNav;
            document.querySelector('.bottom-nav a[href="tvshows.html"] span').textContent = t.showsNav;
            document.querySelector('.menu-item span').textContent = t.menu;
            
            document.querySelector('.dropdown-section h3').innerHTML = `<i class="fas fa-th-large"></i> ${t.movieCategories}`;
            document.querySelector('.dropdown-link[data-category="new"]').textContent = t.new;
            document.querySelectorAll('.dropdown-section:nth-child(2) h3')[0].innerHTML = `<i class="fas fa-cog"></i> ${t.settings}`;
            document.querySelector('#privacy-link').innerHTML = `<i class="fas fa-user-shield"></i> ${t.privacy}`;
            document.querySelector('#help-link').innerHTML = `<i class="fas fa-question-circle"></i> ${t.help}`;
            document.querySelector('.language-selector').innerHTML = `<i class="fas fa-language"></i> ${t.language}
                <select id="language-select" class="lang-select">
                    <option value="rw">Kinyarwanda</option>
                    <option value="en">English</option>
                </select>`;
            document.querySelector('#upgrade-link').innerHTML = `<i class="fas fa-crown"></i> ${t.upgrade}`;
            
            document.querySelector('.plan-badge').textContent = t.planFree;
            document.querySelector('.plan-expiry').textContent = t.planExpiry;
            
            document.querySelector('.free-mode-banner span').innerHTML = t.bannerText;
            document.querySelector('#upgrade-banner-btn').innerHTML = `<i class="fas fa-crown"></i> ${t.upgradeBtn}`;
            
            // Réattacher l'événement au nouveau select de langue
            document.getElementById('language-select').value = lang;
            document.getElementById('language-select').addEventListener('change', function() {
                const newLang = this.value;
                localStorage.setItem('movieshow_lang', newLang);
                updateLanguage(newLang);
            });
        }
    </script>
</body>
</html>